
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A friendly wrapper for modern SQLAlchemy and Alembic">
      
      
      
      
        <link rel="canonical" href="https://jpsca.github.io/sqla-wrapper/alembic-wrapper/">
      
      <link rel="icon" href="../assets/img/favicon.svg">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.4">
    
    
      
        <title>Alembic wrapper - SQLA Wrapper</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.db9e7362.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Convergence:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Convergence";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../assets/css/highlight.css">
    
      <link rel="stylesheet" href="../assets/css/common.css">
    
    
      


    
    



<meta property="og:type" content="website" />
<meta property="og:title" content="SQLA Wrapper - Alembic wrapper" />
<meta property="og:description" content="A friendly wrapper for modern SQLAlchemy and Alembic" />
<meta property="og:url" content="https://jpsca.github.io/sqla-wrapper/alembic-wrapper/" />
<meta property="og:image" content="https://jpsca.github.io/sqla-wrapper/assets/img/social.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1280" />
<meta property="og:image:height" content="630" />
<meta name="twitter:card" content="summary_large_image">


  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="pink">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#alembic-wrapper" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SQLA Wrapper" class="md-header__button md-logo" aria-label="SQLA Wrapper" data-md-component="logo">
      
  <img src="../assets/img/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SQLA Wrapper
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Alembic wrapper
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 10.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zM8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0zm0 13a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13zM2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.75.75 0 0 1-1.06 1.06l-1.06-1.06a.75.75 0 0 1 0-1.06zm9.193 9.193a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061zM16 8a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8zM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8zm10.657-5.657a.75.75 0 0 1 0 1.061l-1.061 1.06a.75.75 0 1 1-1.06-1.06l1.06-1.06a.75.75 0 0 1 1.06 0zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M9.598 1.591a.75.75 0 0 1 .785-.175 7 7 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786zm1.616 1.945a7 7 0 0 1-7.678 7.678 5.5 5.5 0 1 0 7.678-7.678z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/jpsca/sqla-wrapper" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg>
  </div>
  <div class="md-source__repository">
    jpsca/sqla-wrapper
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SQLA Wrapper" class="md-nav__button md-logo" aria-label="SQLA Wrapper" data-md-component="logo">
      
  <img src="../assets/img/logo.svg" alt="logo">

    </a>
    SQLA Wrapper
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/jpsca/sqla-wrapper" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg>
  </div>
  <div class="md-source__repository">
    jpsca/sqla-wrapper
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          SQLAlchemy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SQLAlchemy" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          SQLAlchemy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sqlalchemy-wrapper/" class="md-nav__link">
        SQLAlchemy wrapper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../working-with-the-session/" class="md-nav__link">
        Working with the session
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing-with-a-real-database/" class="md-nav__link">
        Testing with a real database
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Alembic
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Alembic" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Alembic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Alembic wrapper
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Alembic wrapper
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#set-up" class="md-nav__link">
    Set up
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-integrations" class="md-nav__link">
    CLI integrations
  </a>
  
    <nav class="md-nav" aria-label="CLI integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrating-with-flask-click" class="md-nav__link">
    Integrating with Flask Click
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-click" class="md-nav__link">
    Integrating with Click
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-pyceo" class="md-nav__link">
    Integrating with pyCEO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API Reference
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#set-up" class="md-nav__link">
    Set up
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-integrations" class="md-nav__link">
    CLI integrations
  </a>
  
    <nav class="md-nav" aria-label="CLI integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrating-with-flask-click" class="md-nav__link">
    Integrating with Flask Click
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-click" class="md-nav__link">
    Integrating with Click
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-pyceo" class="md-nav__link">
    Integrating with pyCEO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="alembic-wrapper">Alembic wrapper<a class="headerlink" href="#alembic-wrapper" title="Permanent link">#</a></h1>
<p>Alembic is great but it has a configuration problem. While you web application config is probably one or more python files and parameters loaded from environment variables and other sources, Alembic needs a static <code>alembic.ini</code> file. You are suppose to edit the almost-undocumented <code>env.py</code> file to customize it to your application.</p>
<p>The <code>Alembic</code> wrapper class aims to simplify that set up so you can just use your application config, without any more config files to maintain. The actual database migrations are still handled by Alembic so you get exactly the same functionality.</p>
<h2 id="set-up">Set up<a class="headerlink" href="#set-up" title="Permanent link">#</a></h2>
<p>The <code>Alembic()</code> class require two arguments: A <a href="sqlalchemy-wrapper"><code>SQLAlchemy()</code></a> instance and the path of the folder that will contain the migrations.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqla_wrapper</span> <span class="kn">import</span> <span class="n">Alembic</span><span class="p">,</span> <span class="n">SQLAlchemy</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="err">…</span><span class="p">)</span>
<span class="n">alembic</span> <span class="o">=</span> <span class="n">Alembic</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s2">&quot;db/migrations&quot;</span><span class="p">)</span>
</code></pre></div>
<p>If the migrations folder doesn&rsquo;t exists, it will be created.</p>
<h2 id="cli-integrations">CLI integrations<a class="headerlink" href="#cli-integrations" title="Permanent link">#</a></h2>
<p>The only downside is that you can&rsquo;t use the <code>alembic</code> command-line tool anymore. Instead, all the usual Alembic command are be available as methods of the wrapper instance and you need to integrate them with your framework/application CLI.</p>
<p>Is easier than it sounds, specially because the wrapper comes with one-line methods to extend <a href="https://click.palletsprojects.com">Click</a> (the CLI used by Flask by default) and <a href="https://github.com/jpsca/pyceo">pyCEO</a> (arguably, the best CLI ever made).</p>
<h3 id="integrating-with-flask-click">Integrating with Flask Click<a class="headerlink" href="#integrating-with-flask-click" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="err">…</span><span class="p">)</span>
<span class="n">alembic</span> <span class="o">=</span> <span class="n">Alembic</span><span class="p">(</span><span class="err">…</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">alembic</span><span class="o">.</span><span class="n">get_flask_cli</span><span class="p">(</span><span class="s2">&quot;db&quot;</span><span class="p">))</span>
</code></pre></div>
<h3 id="integrating-with-click">Integrating with Click<a class="headerlink" href="#integrating-with-click" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">click</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="err">…</span><span class="p">)</span>
<span class="n">alembic</span> <span class="o">=</span> <span class="n">Alembic</span><span class="p">(</span><span class="err">…</span><span class="p">)</span>

<span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="n">cli</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">alembic</span><span class="o">.</span><span class="n">get_click_cli</span><span class="p">(</span><span class="s2">&quot;db&quot;</span><span class="p">))</span>
</code></pre></div>
<h3 id="integrating-with-pyceo">Integrating with pyCEO<a class="headerlink" href="#integrating-with-pyceo" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pyceo</span> <span class="kn">import</span> <span class="n">Cli</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="err">…</span><span class="p">)</span>
<span class="n">alembic</span> <span class="o">=</span> <span class="n">Alembic</span><span class="p">(</span><span class="err">…</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Manage</span><span class="p">(</span><span class="n">Cli</span><span class="p">):</span>
  <span class="n">db</span> <span class="o">=</span> <span class="n">alembic</span><span class="o">.</span><span class="n">get_pyceo_cli</span><span class="p">(</span><span class="s2">&quot;db&quot;</span><span class="p">)</span>

<span class="n">cli</span> <span class="o">=</span> <span class="n">Manage</span><span class="p">()</span>
</code></pre></div>
<h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">#</a></h2>
<p>For a more in-depth understanding of these methods and the extra options, you can read the <a href="https://alembic.sqlalchemy.org/en/latest/tutorial.html#editing-the-ini-file">documentation for the Alembic config</a>.</p>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>sqla_wrapper.<strong>Alembic</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">db</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">path=&rsquo;db/migrations&rsquo;</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">**options</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-members">
<div class="autodoc-signature"><code><strong>revision</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">message</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">*</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">empty=False</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">parent=&rsquo;head&rsquo;</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Create a new revision.
Auto-generate operations by comparing models and database.</p>
<p>Arguments:</p>
<ul>
<li>message:
    Revision message.</li>
<li>empty:
    Generate just an empty migration file, not the operations.</li>
<li>parent:
    Parent revision of this new revision.</li>
</ul></div>
<div class="autodoc-signature"><code><strong>upgrade</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">target=&rsquo;head&rsquo;</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">*</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">sql=False</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">**kwargs</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Run migrations to upgrade database.</p>
<p>Arguments:</p>
<ul>
<li>target:
    Revision target or &ldquo;from:to&rdquo; range if <code>sql=True</code>. &ldquo;head&rdquo;
    by default.</li>
<li>sql:
    Don&rsquo;t emit SQL to database, dump to standard output instead.</li>
<li>**kwargs:
    Optional arguments. If these are passed, they are sent directly
    to the <code>upgrade()</code> functions within each revision file.
    To use, modify the <code>script.py.mako</code>template file
    so that the <code>upgrade()</code> functions can accept arguments.</li>
</ul></div>
<div class="autodoc-signature"><code><strong>downgrade</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">target=&rsquo;-1&rsquo;</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">*</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">sql=False</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">**kwargs</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Run migrations to downgrade database.</p>
<p>Arguments:</p>
<ul>
<li>target:
    Revision target as an integer relative to the current
    state (e.g.: &ldquo;-1&rdquo;), or as a &ldquo;from:to&rdquo; range if <code>sql=True</code>.
    &ldquo;-1&rdquo; by default.</li>
<li>sql:
    Don&rsquo;t emit SQL to database, dump to standard output instead.</li>
<li>**kwargs:
    Optional arguments. If these are passed, they are sent directly
    to the <code>downgrade()</code> functions within each revision file.
    To use, modify the <code>script.py.mako</code> template file
    so that the <code>downgrade()</code> functions can accept arguments.</li>
</ul></div>
<div class="autodoc-signature"><code><strong>get_history</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">*</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">start=None</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">end=None</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Get the list of revisions in chronological order.
You can optionally specify the range of revisions to return.</p>
<p>Arguments:</p>
<ul>
<li>start:
    From this revision (including it.)</li>
<li>end:
    To this revision (including it.)</li>
</ul></div>
<div class="autodoc-signature"><code><strong>history</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">*</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">verbose=False</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">start=&rsquo;base&rsquo;</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">end=&rsquo;heads&rsquo;</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Print the list of revisions in chronological order.
You can optionally specify the range of revisions to return.</p>
<p>Arguments:</p>
<ul>
<li>verbose:
    If <code>True</code>, shows also the path and the docstring
    of each revision file.</li>
<li>start:
    Optional starting revision (including it.)</li>
<li>end:
    Optional end revision (including it.)</li>
</ul></div>
<div class="autodoc-signature"><code><strong>stamp</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">target=&rsquo;head&rsquo;</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">*</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">sql=False</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">purge=False</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Set the given revision in the revision table. Don&rsquo;t run migrations.</p>
<p>Arguments:</p>
<ul>
<li>target:
    The target revision; &ldquo;head&rdquo; by default.</li>
<li>sql:
    Don&rsquo;t emit SQL to the database, dump to the standard
    output instead.</li>
<li>purge:
    Delete all entries in the version table before stamping.</li>
</ul></div>
<div class="autodoc-signature"><code><strong>get_current</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Get the last revision applied.</p></div>
<div class="autodoc-signature"><code><strong>current</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">verbose=False</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Print the latest revision(s) applied.</p>
<p>Arguments:</p>
<ul>
<li>verbose:
    If <code>True</code>, shows also the path and the docstring
    of the revision file.</li>
</ul></div>
<div class="autodoc-signature"><code><strong>get_head</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Get the latest revision.</p></div>
<div class="autodoc-signature"><code><strong>head</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">verbose=False</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Print the latest revision.</p>
<p>Arguments:</p>
<ul>
<li>verbose:
    If <code>True</code>, shows also the path and the docstring
    of the revision file.</li>
</ul></div>
<div class="autodoc-signature"><code><strong>init</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">path</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Creates a new migration folder
with a <code>script.py.mako</code> template file. It doesn&rsquo;t fail if the
folder or file already exists.</p>
<p>Arguments:</p>
<ul>
<li>path:
    Target folder.</li>
</ul></div>
<div class="autodoc-signature"><code><strong>create_all</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Create all the tables from the current models
and stamp the latest revision without running any migration.</p></div>
<div class="autodoc-signature"><code><strong>rev_id</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Generate a unique id for a revision.</p>
<p>By default this uses <code>alembic.util.rev_id</code>. Override this
method to change it.</p></div>
<div class="autodoc-signature"><code><strong>get_pyceo_cli</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"></div>
<div class="autodoc-signature"><code><strong>get_click_cli</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">name=&rsquo;db&rsquo;</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"></div>
<div class="autodoc-signature"><code><strong>get_flask_cli</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">self</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">name=&rsquo;db&rsquo;</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"></div>
</div>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../testing-with-a-real-database/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Testing with a real database" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Testing with a real database
            </div>
          </div>
        </a>
      
      
        
        <a href="../api/" class="md-footer__link md-footer__link--next" aria-label="Next: API Reference" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              API Reference
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2013 - 2021 Juan-Pablo Scaletti
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.top", "navigation.tracking", "search.suggest", "search.highligh"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.1e84347e.min.js"></script>
      
    
  </body>
</html>